# Chainsight EVM Compatible Chain Snapshot Indexer specification

- [1. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > version`](#version)
- [2. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > metadata`](#metadata)
  - [2.1. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > metadata > label`](#metadata_label)
  - [2.2. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > metadata > type`](#metadata_type)
  - [2.3. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > metadata > description`](#metadata_description)
  - [2.4. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > metadata > tags`](#metadata_tags)
    - [2.4.1. Chainsight EVM Compatible Chain Snapshot Indexer specification > metadata > tags > tags items](#autogenerated_heading_2)
- [3. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource`](#datasource)
  - [3.1. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource > location`](#datasource_location)
    - [3.1.1. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource > location > id`](#datasource_location_id)
    - [3.1.2. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource > location > args`](#datasource_location_args)
      - [3.1.2.1. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource > location > args > network_id`](#datasource_location_args_network_id)
      - [3.1.2.2. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource > location > args > rpc_url`](#datasource_location_args_rpc_url)
      - [3.1.2.3. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource > location > args > id_type`](#datasource_location_args_id_type)
  - [3.2. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource > method`](#datasource_method)
    - [3.2.1. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource > method > identifier`](#datasource_method_identifier)
    - [3.2.2. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource > method > interface`](#datasource_method_interface)
    - [3.2.3. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource > method > args`](#datasource_method_args)
- [4. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > storage`](#storage)
  - [4.1. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > storage > with_timestamp`](#storage_with_timestamp)
- [5. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > interval`](#interval)

**Title:** Chainsight EVM Compatible Chain Snapshot Indexer specification

|                           |                                                                           |
| ------------------------- | ------------------------------------------------------------------------- |
| **Type**                  | `object`                                                                  |
| **Required**              | No                                                                        |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |

**Description:** Chainsight EVM Compatible Chain Snapshot Indexer specification

| Property                     | Pattern | Type   | Deprecated | Definition | Title/Description                     |
| ---------------------------- | ------- | ------ | ---------- | ---------- | ------------------------------------- |
| + [version](#version )       | No      | string | No         | -          | specification version of the canister |
| + [metadata](#metadata )     | No      | object | No         | -          | metadata                              |
| + [datasource](#datasource ) | No      | object | No         | -          | -                                     |
| + [storage](#storage )       | No      | object | No         | -          | storage                               |
| + [interval](#interval )     | No      | number | No         | -          | interval                              |

## <a name="version"></a>1. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > version`

**Title:** specification version of the canister

|              |          |
| ------------ | -------- |
| **Type**     | `string` |
| **Required** | Yes      |

**Example:** 

```json
"v1"
```

| Restrictions                      |                                                                                     |
| --------------------------------- | ----------------------------------------------------------------------------------- |
| **Must match regular expression** | ```^(v1)$``` [Test](https://regex101.com/?regex=%5E%28v1%29%24&testString=%22v1%22) |

## <a name="metadata"></a>2. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > metadata`

**Title:** metadata

|                           |                                                                           |
| ------------------------- | ------------------------------------------------------------------------- |
| **Type**                  | `object`                                                                  |
| **Required**              | Yes                                                                       |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |

| Property                                | Pattern | Type            | Deprecated | Definition | Title/Description           |
| --------------------------------------- | ------- | --------------- | ---------- | ---------- | --------------------------- |
| + [label](#metadata_label )             | No      | string          | No         | -          | label for the canister      |
| + [type](#metadata_type )               | No      | string          | No         | -          | type of the canister        |
| - [description](#metadata_description ) | No      | string          | No         | -          | description of the canister |
| - [tags](#metadata_tags )               | No      | array of string | No         | -          | tags for the canister       |

### <a name="metadata_label"></a>2.1. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > metadata > label`

**Title:** label for the canister

|              |          |
| ------------ | -------- |
| **Type**     | `string` |
| **Required** | Yes      |

**Example:** 

```json
"relayer_ethusd"
```

| Restrictions                      |                                                                                                               |
| --------------------------------- | ------------------------------------------------------------------------------------------------------------- |
| **Must match regular expression** | ```^[a-z0-9_]+$``` [Test](https://regex101.com/?regex=%5E%5Ba-z0-9_%5D%2B%24&testString=%22relayer_ethusd%22) |

### <a name="metadata_type"></a>2.2. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > metadata > type`

**Title:** type of the canister

|              |          |
| ------------ | -------- |
| **Type**     | `string` |
| **Required** | Yes      |

**Examples:** 

```json
"event_indexer"
```

```json
"algorithm_indexer"
```

```json
"snapshot_indexer_icp"
```

```json
"snapshot_indexer_evm"
```

```json
"snapshot_indexer_https"
```

```json
"relayer"
```

```json
"algorithm_lens"
```

| Restrictions                      |                                                                                                                                                                                                                                                                                                                                                            |
| --------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Must match regular expression** | ```^(event_indexer\|algorithm_indexer\|snapshot_indexer_icp\|snapshot_indexer_evm\|snapshot_indexer_https\|relayer\|algorithm_lens)$``` [Test](https://regex101.com/?regex=%5E%28event_indexer%7Calgorithm_indexer%7Csnapshot_indexer_icp%7Csnapshot_indexer_evm%7Csnapshot_indexer_https%7Crelayer%7Calgorithm_lens%29%24&testString=%22event_indexer%22) |

### <a name="metadata_description"></a>2.3. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > metadata > description`

**Title:** description of the canister

|              |          |
| ------------ | -------- |
| **Type**     | `string` |
| **Required** | No       |

**Description:** Can be used to filter canisters in the UI

**Example:** 

```json
"Relayer for ETHUSD"
```

### <a name="metadata_tags"></a>2.4. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > metadata > tags`

**Title:** tags for the canister

|              |                   |
| ------------ | ----------------- |
| **Type**     | `array of string` |
| **Required** | No                |

**Description:** Can be used to filter canisters in the UI

|                      | Array restrictions |
| -------------------- | ------------------ |
| **Min items**        | N/A                |
| **Max items**        | N/A                |
| **Items unicity**    | False              |
| **Additional items** | False              |
| **Tuple validation** | See below          |

| Each item of this array must be    | Description |
| ---------------------------------- | ----------- |
| [tags items](#metadata_tags_items) | -           |

#### <a name="autogenerated_heading_2"></a>2.4.1. Chainsight EVM Compatible Chain Snapshot Indexer specification > metadata > tags > tags items

|              |          |
| ------------ | -------- |
| **Type**     | `string` |
| **Required** | No       |

**Examples:** 

```json
"Ethereum"
```

```json
"Relayer"
```

```json
"Account"
```

| Restrictions                      |                                                                                                                 |
| --------------------------------- | --------------------------------------------------------------------------------------------------------------- |
| **Must match regular expression** | ```^[a-zA-Z0-9_-]+$``` [Test](https://regex101.com/?regex=%5E%5Ba-zA-Z0-9_-%5D%2B%24&testString=%22Ethereum%22) |

## <a name="datasource"></a>3. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource`

|                           |                                                                           |
| ------------------------- | ------------------------------------------------------------------------- |
| **Type**                  | `object`                                                                  |
| **Required**              | Yes                                                                       |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |

| Property                            | Pattern | Type   | Deprecated | Definition | Title/Description          |
| ----------------------------------- | ------- | ------ | ---------- | ---------- | -------------------------- |
| + [location](#datasource_location ) | No      | object | No         | -          | location of the datasource |
| + [method](#datasource_method )     | No      | object | No         | -          | method                     |

### <a name="datasource_location"></a>3.1. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource > location`

**Title:** location of the datasource

|                           |                                                                           |
| ------------------------- | ------------------------------------------------------------------------- |
| **Type**                  | `object`                                                                  |
| **Required**              | Yes                                                                       |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |

**Description:** location of the datasource. For contract, it is the contract address. For canister, it is the canister id or canister name defined in dfx.json.

| Property                             | Pattern | Type   | Deprecated | Definition | Title/Description    |
| ------------------------------------ | ------- | ------ | ---------- | ---------- | -------------------- |
| + [id](#datasource_location_id )     | No      | string | No         | -          | id of the datasource |
| + [args](#datasource_location_args ) | No      | object | No         | -          | args                 |

#### <a name="datasource_location_id"></a>3.1.1. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource > location > id`

**Title:** id of the datasource

|              |          |
| ------------ | -------- |
| **Type**     | `string` |
| **Required** | Yes      |

**Description:** id of the datasource. For contract, it is the contract address. For canister, it is the canister id or canister name defined in dfx.json.

**Examples:** 

```json
"9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0"
```

```json
"0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0"
```

```json
"pj_snapshot_indexer_evm"
```

```json
"rrkah-fqaaa-aaaaa-aaaaq-cai"
```

#### <a name="datasource_location_args"></a>3.1.2. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource > location > args`

**Title:** args

|                           |                                                                           |
| ------------------------- | ------------------------------------------------------------------------- |
| **Type**                  | `object`                                                                  |
| **Required**              | Yes                                                                       |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |

**Description:** args for the datasource.

| Property                                              | Pattern | Type             | Deprecated | Definition | Title/Description |
| ----------------------------------------------------- | ------- | ---------------- | ---------- | ---------- | ----------------- |
| - [network_id](#datasource_location_args_network_id ) | No      | integer          | No         | -          | network id        |
| - [rpc_url](#datasource_location_args_rpc_url )       | No      | string           | No         | -          | rpc url           |
| - [id_type](#datasource_location_args_id_type )       | No      | enum (of string) | No         | -          | id type           |

##### <a name="datasource_location_args_network_id"></a>3.1.2.1. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource > location > args > network_id`

**Title:** network id

|              |           |
| ------------ | --------- |
| **Type**     | `integer` |
| **Required** | No        |

**Description:** chain id. It is required if type is contract.

**Examples:** 

```json
1
```

```json
31337
```

| Restrictions                      |                                                                                    |
| --------------------------------- | ---------------------------------------------------------------------------------- |
| **Must match regular expression** | ```^[0-9]+$``` [Test](https://regex101.com/?regex=%5E%5B0-9%5D%2B%24&testString=1) |

##### <a name="datasource_location_args_rpc_url"></a>3.1.2.2. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource > location > args > rpc_url`

**Title:** rpc url

|              |          |
| ------------ | -------- |
| **Type**     | `string` |
| **Required** | No       |

**Description:** rpc url of the datasource. It is required if type is contract.

**Example:** 

```json
"https://mainnet.infura.io/v3/YOUR_API_KEY"
```

| Restrictions                      |                                                                                                                                                                 |
| --------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Must match regular expression** | ```^(http\|https)://``` [Test](https://regex101.com/?regex=%5E%28http%7Chttps%29%3A%2F%2F&testString=%22https%3A%2F%2Fmainnet.infura.io%2Fv3%2FYOUR_API_KEY%22) |

##### <a name="datasource_location_args_id_type"></a>3.1.2.3. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource > location > args > id_type`

**Title:** id type

|              |                    |
| ------------ | ------------------ |
| **Type**     | `enum (of string)` |
| **Required** | No                 |

**Description:** type of the id. It is required if type is canister.

**Examples:** 

```json
"canister_id"
```

```json
"canister_name"
```

Must be one of:
* "canister_id"
* "canister_name"

| Restrictions                      |                                                                                                                                               |
| --------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| **Must match regular expression** | ```^(canister_id\|canister_name)$``` [Test](https://regex101.com/?regex=%5E%28canister_id%7Ccanister_name%29%24&testString=%22canister_id%22) |

### <a name="datasource_method"></a>3.2. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource > method`

**Title:** method

|                           |                                                                           |
| ------------------------- | ------------------------------------------------------------------------- |
| **Type**                  | `object`                                                                  |
| **Required**              | Yes                                                                       |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |

**Description:** method of the datasource. The canister will call this method to get data.

| Property                                       | Pattern | Type   | Deprecated | Definition | Title/Description        |
| ---------------------------------------------- | ------- | ------ | ---------- | ---------- | ------------------------ |
| + [identifier](#datasource_method_identifier ) | No      | string | No         | -          | identifier of the method |
| - [interface](#datasource_method_interface )   | No      | string | No         | -          | interface                |
| - [args](#datasource_method_args )             | No      | array  | No         | -          | args                     |

#### <a name="datasource_method_identifier"></a>3.2.1. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource > method > identifier`

**Title:** identifier of the method

|              |          |
| ------------ | -------- |
| **Type**     | `string` |
| **Required** | Yes      |

**Description:** contract of candid function and its return values to call.

**Examples:** 

```json
"latestAnswer():(uint256)"
```

```json
"balanceOf(address):(uint256)"
```

```json
"get_last_snapshot : () -> (record { value : text; timestamp : nat64 })"
```

#### <a name="datasource_method_interface"></a>3.2.2. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource > method > interface`

**Title:** interface

|              |          |
| ------------ | -------- |
| **Type**     | `string` |
| **Required** | No       |

**Description:** abi json file to use. This file must be in ./interfaces folder. It is required if type is contract.

**Examples:** 

```json
"AggregatorV3Interface.json"
```

```json
"IERC20.json"
```

#### <a name="datasource_method_args"></a>3.2.3. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > datasource > method > args`

**Title:** args

|              |         |
| ------------ | ------- |
| **Type**     | `array` |
| **Required** | No      |

**Description:** args for the method

**Examples:** 

```json
1
```

```json
"0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0"
```

|                      | Array restrictions |
| -------------------- | ------------------ |
| **Min items**        | N/A                |
| **Max items**        | N/A                |
| **Items unicity**    | False              |
| **Additional items** | False              |
| **Tuple validation** | N/A                |

## <a name="storage"></a>4. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > storage`

**Title:** storage

|                           |                                                                           |
| ------------------------- | ------------------------------------------------------------------------- |
| **Type**                  | `object`                                                                  |
| **Required**              | Yes                                                                       |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |

**Description:** storage properties for the canister

| Property                                     | Pattern | Type    | Deprecated | Definition | Title/Description  |
| -------------------------------------------- | ------- | ------- | ---------- | ---------- | ------------------ |
| + [with_timestamp](#storage_with_timestamp ) | No      | boolean | No         | -          | with_timestamptamp |

### <a name="storage_with_timestamp"></a>4.1. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > storage > with_timestamp`

**Title:** with_timestamptamp

|              |           |
| ------------ | --------- |
| **Type**     | `boolean` |
| **Required** | Yes       |

**Description:** whether to store the data with timestamp

**Example:** 

```json
true
```

## <a name="interval"></a>5. Property `Chainsight EVM Compatible Chain Snapshot Indexer specification > interval`

**Title:** interval

|              |          |
| ------------ | -------- |
| **Type**     | `number` |
| **Required** | Yes      |

**Description:** interval of the canister invocation in seconds

**Example:** 

```json
60
```

----------------------------------------------------------------------------------------------------------------------------
Generated using [json-schema-for-humans](https://github.com/coveooss/json-schema-for-humans) on 2023-10-30 at 02:57:07 +0000
